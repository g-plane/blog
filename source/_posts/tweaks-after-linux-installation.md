---
title: 安装 Linux 后要调整的东西
date: 2022-03-15 08:33:46
tags:
  - Linux
---

最近新组了一台电脑，安装了 Linux 后遇到了一些以前没有注意或没有碰到的问题。

## Baloo 占用大量硬盘读写

新买的电脑组装完才两个星期，就发现 SSD 的写入量已经超过了 1 TB。虽然新的电脑会安装操作系统和其它软件，但消耗应该不至于那么多。不过考虑到我安装了两个操作系统（Windows 11 和 Arch Linux），感觉也不是没有可能。

然而在一周后，我发现 SSD 的写入量超过了 2 TB。这肯定是有问题了，因为后面的使用基本稳定，我没有进行过较多的写入操作。

有一次，在正常浏览网页的时候，电脑突然变得卡顿。这电脑是新买的，并且配置不算低，按道理这种情况不应该发生。于是我打开 KDE 的「系统监视器」，发现里面有一项名为 `baloo_file` 的进程，占用了不少的 CPU 资源，并且硬盘读写达到了数百 MB/s。

查找相关资料，说是这个 Baloo 跟 KDE 的文件索引有关，被用于快速搜索。打开「系统设置」，依次打开「搜索」->「文件搜索」，取消勾选里面的「启用文件搜索」复选框并保存设置即可。也有通过在命令行里使用 `balooctl` 来关闭的办法。

## AX200/AX201 网卡的速度较慢

这个问题在当时调试了很长时间。不过这也与我的测试方法不太恰当有关系——我当时是用 [speedtest.net](https://www.speedtest.net/) 并连接同一城市、同一运营商的节点去测试的。当时的测试结果是 Windows 下能达到近满速，而 Linux 下不能。后来是按照 「@yushijinhun](https://yushi.moe/) 的建议使用 iperf3 去测速。

要修复速度较慢这个问题，先创建一个文本文件 `/etc/modprobe.d/iwlwifi.conf`，并输入以下内容：

```
options 11n_disable=1 power_save=0
```

可以大概猜测出，网速慢有可能是因为无线网卡处于节能模式，`power_save=0` 即为关闭节能模式。至于前面的 `11n_disable=1`，目前我还不太清楚它的存在与否会不会有影响。

最后运行 iperf3 工具，可以获得与 Windows 下相近的连接速度的测试结果。尽管两个操作系统下 iperf3 的测试表现都不如有线的测试表现。

## Haruna 播放器无法运行

虽然 Arch CN 仓库里的 `haruna` 包没有声明，但它其实是依赖于 `ffmpeg4.4` 这个包的。不然的话打开软件会出现闪退；在命令行里运行则会看到它提示 `libavutil.so` 文件缺失。
